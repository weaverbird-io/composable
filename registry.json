{
  "version": "1.0.0",
  "infrastructure": [
    {
      "name": "infrastructure-networks-default",
      "path": "infrastructure/networks/default",
      "description": "Shared Docker networks for all services",
      "ports": [],
      "requires": [],
      "env_vars": [],
      "files": ["docker-compose.yml"]
    },
    {
      "name": "infrastructure-traefik-default",
      "path": "infrastructure/traefik/default",
      "description": "Reverse proxy with automatic HTTPS (Let's Encrypt)",
      "ports": [80, 443, 1883, 8883],
      "requires": ["infrastructure-networks-default"],
      "env_vars": ["ACME_EMAIL", "TRAEFIK_DASHBOARD_DOMAIN", "MIAB_IP"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-vault-default",
      "path": "infrastructure/vault/default",
      "description": "HashiCorp Vault for secrets management",
      "ports": [],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["VAULT_DOMAIN"],
      "files": ["docker-compose.yml", ".env.example", "config/vault.hcl"]
    },
    {
      "name": "infrastructure-mqtt-default",
      "path": "infrastructure/mqtt/default",
      "description": "Eclipse Mosquitto MQTT broker with TLS via Traefik",
      "ports": [],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["MQTT_DOMAIN", "MQTT_USER", "MQTT_PASSWORD"],
      "files": ["docker-compose.yml", ".env.example", "config/mosquitto.conf"]
    },
    {
      "name": "infrastructure-mailpit-default",
      "path": "infrastructure/mailpit/default",
      "description": "Email testing server with web UI",
      "ports": [],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["MAILPIT_DOMAIN"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-rabbitmq-default",
      "path": "infrastructure/rabbitmq/default",
      "description": "RabbitMQ message broker with management UI",
      "ports": [],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["RABBITMQ_DOMAIN", "RABBITMQ_USER", "RABBITMQ_PASSWORD"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-wireguard-default",
      "path": "infrastructure/wireguard/default",
      "description": "WireGuard VPN server",
      "ports": [51820],
      "requires": ["infrastructure-networks-default"],
      "env_vars": ["WG_SERVER_URL", "WG_PORT", "WG_PEERS", "WG_DNS"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-mailcow-default",
      "path": "infrastructure/mailcow/default",
      "description": "Mailcow full email server (Postfix, Dovecot, SOGo, Rspamd)",
      "ports": [25, 465, 587, 143, 993, 110, 995, 4190],
      "requires": ["infrastructure-networks-default"],
      "env_vars": ["MAILCOW_HOSTNAME", "MAILCOW_TZ"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-mailinabox-default",
      "path": "infrastructure/mailinabox/default",
      "description": "Mail-in-a-Box in LXD container with Traefik integration",
      "ports": [25, 465, 587, 993],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["MIAB_HOSTNAME", "MIAB_EMAIL", "MIAB_CONTAINER_NAME", "MIAB_STATIC_IP"],
      "files": ["docker-compose.yml", ".env.example"]
    },
    {
      "name": "infrastructure-erpnext-default",
      "path": "infrastructure/erpnext/default",
      "description": "ERPNext v15 open-source ERP system",
      "ports": [],
      "requires": ["infrastructure-traefik-default"],
      "env_vars": ["SITE_DOMAIN", "DB_ROOT_PASSWORD", "ADMIN_PASSWORD", "ERPNEXT_VERSION"],
      "files": ["docker-compose.yml", ".env.example", "setup.sh"]
    }
  ],
  "services": []
}
