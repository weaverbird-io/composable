name: infrastructure-networks-default

services:
  # Dummy service to trigger network creation
  # Runs once and exits - networks persist
  init:
    image: busybox:latest
    command: ["true"]
    networks:
      - infra-public
      - infra-private

networks:
  infra-public:
    driver: bridge
    name: infra-public
    ipam:
      config:
        - subnet: 172.20.0.0/16

  infra-private:
    driver: bridge
    name: infra-private
    ipam:
      config:
        - subnet: 172.21.0.0/16
    internal: true
